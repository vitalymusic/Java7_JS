<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formas HTML un JS</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>


    <style>
        .atkape {
            margin-bottom: 50px !important;
        }

        .large {
            font-size: 1.5rem !important;
        }
    </style>
</head>

<body>
    <div class="container">
        <h1 class="text-center mb-3 atkape">Formas apstrāde ar JS</h1>
        <form action="" id="reg_form" style="width: 700px;margin:auto">
            <div class="row mb-3">
                <div class="col">
                    <label for="name" class="form-label">Jūsu vārds</label>
                    <input type="text" class="form-control" id="name" name="name">
                </div>
                <div class="col">
                    <label for="surname" class="form-label">Jūsu uzvārds</label>
                    <input type="text" class="form-control" id="surname" name="surname">
                </div>
            </div>
            <div class="row mb-3">
                <div class="col">
                    <label for="email" class="form-label">Jūsu e-pasts</label>
                    <input type="text" class="form-control" id="email" name="email">
                </div>
            </div>
            <div class="row mb-3">
                <div class="col">
                    <label for="bio" class="form-label">Uzrakstiet par sevi</label>
                    <textarea class="form-control" id="bio" rows="3" name="bio"></textarea>
                </div>
            </div>
            <div class="row mb-3">
                <div class="col">
                    <label for="password" class="form-label">Jūsu parole</label>
                    <input type="password" class="form-control" id="password" name="password">
                </div>
                <div class="col">
                    <label for="password_repeat" class="form-label">Atkārtojiet paroli</label>
                    <input type="password" class="form-control" id="password_repeat" name="password_repeat">
                </div>
            </div>

            <div class="row mb-3 mt-5">
                <div class="col large">
                    <input class="form-check-input" type="checkbox" value="agree" id="agree" name="agree">
                    <label class="form-check-label large" for="agree">
                        Piekrītu lapas <a href="#">lietošanas noteikumiem</a>
                    </label>
                </div>
            </div>
            <div class="row mt-5">
                <button type="submit" class="btn btn-primary ">Reģistrēties</button>
            </div>



        </form>

    </div>


    <script>
        let form = document.querySelector('#reg_form');
        let formError = false;


        form.onsubmit = function (event) {
            event.preventDefault();




            // Lauka vārds pārbaude
            let vards = document.querySelector("#name");

            if (vards.value.length <= 3) {
                formError = true;
                vards.classList.add('is-invalid');
                showError(vards,"Jūsu vārds ir pārāk īss!");
            } else {
                formError = false;
                vards.classList.replace('is-invalid', 'is-valid');
                removeError(vards);
            }

             // Lauka uzvārds pārbaude
            let uzvards = document.querySelector("#surname");

            if (uzvards.value.length <= 3) {
                formError = true;
                uzvards.classList.add('is-invalid');
            } else {
                formError = false;
                uzvards.classList.replace('is-invalid', 'is-valid');
            }


             // Lauka epasts pārbaude

             let emailCheck = /^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/g;  
             let epasts = document.querySelector("#email");

            if (!epasts.value.match(emailCheck)) {
                formError = true;
                epasts.classList.add('is-invalid');
            } else {
                formError = false;
                epasts.classList.replace('is-invalid', 'is-valid');
            }


            // Lauka parole pārbaude

            let passCheck = /^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[a-zA-Z]).{6,}$/g
            let parole = document.querySelector("#password");

            if (!parole.value.match(passCheck)) {
                formError = true;
                parole.classList.add('is-invalid');
            } else {
                formError = false;
                parole.classList.replace('is-invalid', 'is-valid');
            }

            let paroleAtkartot = document.querySelector("#password_repeat");

            if(parole.value !== paroleAtkartot.value){
                formError = true;
                paroleAtkartot.classList.add('is-invalid');
            }else{
                formError = false;
                paroleAtkartot.classList.replace('is-invalid', 'is-valid');
            }



            // <div class="invalid-feedback">
    //          Please choose a username.
    //      </div>

                function showError(element,errorText){
                    element.insertAdjacentHTML("afterend",`
                        <div class="invalid-feedback">
                            ${errorText}
                        </div>      
                    `)
                }
                function removeError(element){
                    element.parentElement.querySelector(".invalid-feedback").remove();
                }


                
                








        }

    </script>
</body>

</html>